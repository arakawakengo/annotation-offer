
## アノテーションデータの時刻合わせ作業マニュアル

### 1. 環境構築

- 本マニュアルでは、ROS (Noetic) がインストール済みであることを前提とします。
- アノテーション作業に必要な `tamsviz` パッケージを以下のURLに従ってインストールしてください。
  [tamsviz パッケージのインストール手順](https://chatgpt.com/share/677d5201-bc90-8009-829d-cc0c69ecc43b)

### 2. 必要なファイルのダウンロード

- アノテーション作業に必要な以下のファイルを含むフォルダ(OneDrive上のフォルダ1つが1つのデータ)をダウンロードしてください。
  1. 実験で取得したデータの bag ファイル(映像と音声のみにし、サイズを縮小したもの)
  2. 編集前のアノテーションデータ（.tmv ファイル）
  3. アノテーション作業用の launch ファイル
- ファイルの保存場所は任意です。

### 3. launch ファイルを起動してアノテーションツールを起動する

- 保存したフォルダ内にある launch ファイルを使用して、アノテーション作業を開始します。
- 以下の手順で launch ファイルを起動してください。
  1. ターミナルを開きます。
  2. 作業フォルダに移動します。
     ```bash
     cd /path/to/your/folder
     ```
  3. 以下のコマンドを実行して launch ファイルを起動します。
     ```bash
     roslaunch annotation.launch
     ```
- launch ファイルでは、アノテーションツールと音声再生用ノードが起動します。

### 4. アノテーションファイルを開く

- tamsviz の左上にある "Open" ボタンをクリックし、ダウンロードした tamsviz ファイル（.tmv）を開いてください。
- 左下（タイムラインの上）にある "Data" から、ダウンロードしたrosbagファイル, (~filtered.bag) を選択します。

これにより、アノテーション対象のデータと、タイムライン上に発話のテキストデータが表示されます。
（画像参照）

### 5. アノテーション作業の内容

#### 大枠の流れ

- タイムライン上に "utterance" トラックが表示され、ロボット操作者の発話を文字起こししたテキストが並んでいます。
- データを再生しながら、実際に話しているタイミングに各テキストを移動させてください。

#### より詳しい情報

1. "utterance" 上にはおおよそ発話された順にテキストを均等に配置してあります。
   - これらのテキストの長さや位置を調整してください。
2. 必要に応じて新しい "utterance" トラックを作成してください。
   - 序盤に発話がない場合など、ずらすだけでは詰まって作業しづらい場合には新しいトラックを作成して進めてください。
3. 実験開始前や終了後の会話、トラブル中などの休止会話は発話テキストが存在していません。

#### temporary トラック

- 発話テキストは時系列順ではなく、ラベル作成順に配置されてしまっており、一部時系列順から外れている場合があります。
  - そのようなテキストがあった場合は避難場所として "temporary" トラックに移動してください。
- また、逆に発話のテキストが近くにない場合、"temporary"トラックを参照してください。
- テキストリストで末尾に存在した後からつけられたラベルがはじめから"temporary"トラックにおいてあります。

#### 注意事項（重要）

- 発話テキストの文面は編集せず、そのままの形で使用してください。
  - テキスト内容をそのまま使って後ほどラベルの分類と対応付けるためです。
- そのため、はじめから存在したラベルを、内容の編集・追加・削除を行うことなく、 "utterance" と "temporary" トラック内で移動させてください。

#### remarksについて

- 急ぎで文字起こしを行ったため、タイポや聞き漏らしがあると思われます、もしコメントを残したい場合、 "remarks" トラックにコメントを残してください。必須ではありません。

---

※作業中に問題が発生した場合、環境設定や必要なパッケージが正しくインストールされているか確認してください。また、エラーメッセージが表示された場合はその内容を控えて、サポートを求めてください。
